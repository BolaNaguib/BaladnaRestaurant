!function(g){g.datePicker={strings:{monthsFull:["January","Febraury","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],daysFull:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Su","Mo","Tu","We","Th","Fr","Sa"],messageLocked:"The day you have just selected is not available"},defaults:{formatDate:function(e){return g.datePicker.utils.pad(e.getDate(),2)+"/"+g.datePicker.utils.pad(e.getMonth()+1,2)+"/"+e.getFullYear()},parseDate:function(e){var a=new Date,t=e.match(/(\d{1,2})\/(\d{1,2})\/(\d{4})/);return t&&4==t.length&&(a=new Date(t[3],t[2]-1,t[1])),a},selectDate:function(e){return!0},limitCenturies:!0,closeOnPick:!0},utils:{firstDay:function(e,a){return new Date(e,a,1).getDay()},daysInMonth:function(e,a){return new Date(e,++a,0).getDate()},buildDecadePicker:function(e,a){g.datePicker;var t=g('<div class="decades"></div>'),r=100*Math.floor(e/100)-10,n=g.datePicker.defaults.limitCenturies,d='<div class="row header"><a href="#" class="prev'+(n&&r<1900?" disabled":"")+'"><span class="arrow"></span></a><a href="#" class="century" data-century="'+(10+r)+'">'+(1+r)+"-"+(100+r)+'</a><a href="#" class="next'+(n&&1990==r?" disabled":"")+'"><span class="arrow"></span></a></div>';t.append(d);for(var s=0,l="",c=0,i=0;i<3;i++){for(var o=g('<div class="row"></div>'),u=0;u<4;u++)if(l=0==(s=u+4*i)?" grayed prev":11==s?" grayed next":"",c=r+10*s,n&&(c<1900||2090<c)){var h=g('<a href="" class="cell large double decade blank">&nbsp;</a>');o.append(h)}else{c<=a&&a<=c+9&&(l+=" selected");h=g('<a href="#" data-year="'+c+'" class="cell large double decade'+l+'"><span>'+c+"- "+(c+9)+"</span></a>");o.append(h)}t.append(o)}return t},buildYearPicker:function(e,a){g.datePicker;var t=g('<div class="years"></div>'),r=10*Math.floor(e/10)-1,n=g.datePicker.defaults.limitCenturies,d='<div class="row header"><a href="#" class="prev'+(n&&1899==r?" disabled":"")+'"><span class="arrow"></span></a><a href="#" class="decade" data-decade="'+(1+r)+'">'+(1+r)+"-"+(10+r)+'</a><a href="#" class="next'+(n&&2089==r?" disabled":"")+'"><span class="arrow"></span></a></div>';t.append(d);for(var s=0,l="",c=0,i=0;i<3;i++){for(var o=g('<div class="row"></div>'),u=0;u<4;u++)if(l=0==(s=u+4*i)?" grayed prev":11==s?" grayed next":"",c=r+s,n&&(c<1900||2099<c)){var h=g('<a href="" class="cell large year blank">&nbsp;</a>');o.append(h)}else{c==a&&(l+=" selected");h=g('<a href="#" data-year="'+c+'" class="cell large year'+l+'">'+c+"</a>");o.append(h)}t.append(o)}return t},buildMonthPicker:function(e,a){var t=g.datePicker,r=g('<div class="months"></div>'),n=g.datePicker.defaults.limitCenturies,d='<div class="row header"><a href="#" class="prev'+(n&&1900==e?" disabled":"")+'"><span class="arrow"></span></a><a href="#" class="year" data-year="'+e+'">'+e+'</a><a href="#" class="next'+(n&&2099==e?" disabled":"")+'"><span class="arrow"></span></a></div>';r.append(d);for(var s=0,l="",c=0;c<3;c++){for(var i=g('<div class="row"></div>'),o=0;o<4;o++){l="",(s=o+4*c)==a&&(l+=" selected");var u=g('<a href="#" data-year="'+e+'" data-month="'+s+'" class="cell large month'+l+'">'+t.strings.monthsShort[s]+"</a>");i.append(u)}r.append(i)}return r},buildCalendar:function(e,a,t){var r=g.datePicker,n=g('<div class="calendar"></div>'),d=new Date,s=(e=e||d.getFullYear(),a=0<=a?a:d.getMonth(),new Date(e,a,1)),l=g.datePicker.defaults.limitCenturies;s.setDate(s.getDate()-1);var c=s.getDate(),i=this.daysInMonth(e,a),o=this.firstDay(e,a),u=1-o;0==o&&(u-=7);var h='<div class="row header"><a href="#" class="prev'+(l&&1900==e&&0==a?" disabled":"")+'"><span class="arrow"></span></a><a href="#" class="month" data-year="'+e+'" data-month="'+a+'">'+r.strings.monthsFull[a]+" "+e+'</a><a href="#" class="next'+(l&&2099==e&&11==a?" disabled":"")+'"><span class="arrow"></span></a></div>';n.append(h);for(var f=g('<div class="row days"></div>'),p=0;p<7;p++)f.append('<div class="cell">'+r.strings.daysShort[p]+"</div>");n.append(f);for(p=0;p<6;p++){for(var v=g('<div class="row week"></div>'),m=0;m<7;m++){var y=u<=0?c+u:i<u?u-i:u,k=u<=0?" grayed prev":i<u?" grayed next":"";l&&(1900==e&&0==a&&u<1||2099==e&&11==a&&i<u)?(v.append('<a href="#" class="cell day blank">&nbsp;</a>'),u++):(u==d.getDate()&&a==d.getMonth()&&e==d.getFullYear()&&(k+=" today"),u==t.getDate()&&a==t.getMonth()&&e==t.getFullYear()&&(k+=" selected"),v.append('<a href="#" class="cell day'+k+'">'+y+"</a>"),u++)}n.append(v)}return n},pad:function(e,a){for(var t=e+"";t.length<a;)t="0"+t;return t}},show:function(e){var d=g.extend(!0,{},g.datePicker.defaults,e),l=null,c=new Date;d.element&&("string"==typeof d.element&&(d.element=g(d.element)),c=d.parseDate(d.element.val()));var i={day:c.getDate(),month:c.getMonth(),year:c.getFullYear(),decade:c.getFullYear()},a=g.datePicker.utils.buildCalendar(i.year,i.month,c),t=g.datePicker.utils.buildMonthPicker(i.year,i.month),r=g.datePicker.utils.buildYearPicker(i.year,i.year),n=g.datePicker.utils.buildDecadePicker(i.year,i.year);if((l=g('<div class="datepicker"><span class="tip"></span></div>')).append(a),l.append(t),l.append(r),l.append(n),g.datePicker.hide(!0),d.element){var s=d.element.offset();l.css({left:s.left+"px",top:s.top+d.element.outerHeight(!0)+15+"px"})}l.hide(),g("body").append(l),l.fadeIn(150),l.on("click",".calendar .day",function(e){e.preventDefault();var a=g(this),t=a.closest(".calendar");if(!a.hasClass("blank")){t.find(".selected").removeClass("selected"),a.addClass("selected"),i.day=parseInt(a.text())||1,a.hasClass("grayed")&&(a.hasClass("prev")?(i.year-=0==i.month?1:0,i.month=0<i.month?i.month-1:11):a.hasClass("next")&&(i.year+=11==i.month?1:0,i.month=i.month<11?i.month+1:0));var r=new Date;if(r.setFullYear(i.year,i.month,i.day),d.selectDate(r)){c.setFullYear(i.year,i.month,i.day);var n=d.formatDate(c);g(d.element).val(n),d.closeOnPick&&!a.hasClass("grayed")&&g.datePicker.hide()}}}),l.on("click",".calendar .month",function(e){e.preventDefault();var a=g(this).closest(".calendar"),t=l.children(".months"),r=g.datePicker.utils.buildMonthPicker(i.year,i.month);t.replaceWith(r),t=r,a.fadeOut(150,function(){t.fadeIn(150)})}),l.on("click",".calendar .prev",function(e){e.preventDefault();var a=g(this),t=a.closest(".calendar"),r=t.find(".month"),n=r.data("month"),d=r.data("year");a.hasClass("disabled")||((n-=1)<0&&(n=11,d--),i.month=n,i.year=d,replacement=g.datePicker.utils.buildCalendar(d,n,c),replacement.hide(),t.after(replacement),t.fadeOut(150,function(){t.detach(),replacement.fadeIn(150)}))}),l.on("click",".calendar .next",function(e){e.preventDefault();var a=g(this),t=a.closest(".calendar"),r=t.find(".month"),n=r.data("month"),d=r.data("year");a.hasClass("disabled")||(11<(n+=1)&&(n=0,d++),i.month=n,i.year=d,replacement=g.datePicker.utils.buildCalendar(d,n,c),replacement.hide(),t.after(replacement),t.fadeOut(150,function(){t.detach(),replacement.fadeIn(150)}))}),l.on("click",".months .month",function(e){e.preventDefault();var a=g(this),t=a.closest(".months"),r=a.data("month"),n=a.data("year"),d=l.children(".calendar"),s=null;a.hasClass("blank")||(t.find(".selected").removeClass("selected"),a.addClass("selected"),i.month=r,(s=g.datePicker.utils.buildCalendar(n,r,c)).hide(),d.replaceWith(s),t.fadeOut(150,function(){s.fadeIn(150)}))}),l.on("click",".months .prev",function(e){e.preventDefault();var a=g(this),t=a.closest(".months"),r=t.find(".year").data("year");a.hasClass("disabled")||(--r,i.year=r,replacement=g.datePicker.utils.buildMonthPicker(r,i.month),replacement.hide(),t.after(replacement),t.fadeOut(150,function(){t.detach(),replacement.fadeIn(150)}))}),l.on("click",".months .next",function(e){e.preventDefault();var a=g(this),t=a.closest(".months"),r=t.find(".year").data("year");a.hasClass("disabled")||(r+=1,i.year=r,replacement=g.datePicker.utils.buildMonthPicker(r,i.month),replacement.hide(),t.after(replacement),t.fadeOut(150,function(){t.detach(),replacement.fadeIn(150)}))}),l.on("click",".months .year",function(e){e.preventDefault();var a=g(this).closest(".months"),t=l.children(".years"),r=g.datePicker.utils.buildYearPicker(i.decade,i.year);t.replaceWith(r),t=r,a.fadeOut(150,function(){t.fadeIn(150)})}),l.on("click",".years .year",function(e){e.preventDefault();var a=g(this),t=a.closest(".years"),r=a.data("year"),n=l.children(".months"),d=null;a.hasClass("blank")||a.hasClass("next")||a.hasClass("prev")||(t.find(".selected").removeClass("selected"),a.addClass("selected"),i.year=r,i.decade=r,(d=g.datePicker.utils.buildMonthPicker(r,i.month)).hide(),n.replaceWith(d),t.fadeOut(150,function(){d.fadeIn(150)}))}),l.on("click",".years .prev",function(e){e.preventDefault();var a=g(this),t=a.closest(".years"),r=t.find(".decade").data("decade");a.hasClass("disabled")||(r-=10,i.decade=r,replacement=g.datePicker.utils.buildYearPicker(r,i.year),replacement.hide(),t.after(replacement),t.fadeOut(150,function(){t.detach(),replacement.fadeIn(150)}))}),l.on("click",".years .next",function(e){e.preventDefault();var a=g(this),t=a.closest(".years"),r=t.find(".decade").data("decade");a.hasClass("disabled")||(r+=10,i.decade=r,replacement=g.datePicker.utils.buildYearPicker(r,i.year),replacement.hide(),t.after(replacement),t.fadeOut(150,function(){t.detach(),replacement.fadeIn(150)}))}),l.on("click",".years .decade",function(e){e.preventDefault();var a=g(this).closest(".years"),t=l.children(".decades");a.fadeOut(150,function(){t.fadeIn(150)})}),l.on("click",".decades .decade",function(e){e.preventDefault();var a=g(this),t=a.data("year"),r=a.closest(".decades"),n=l.children(".years"),d=null;a.hasClass("blank")||a.hasClass("next")||a.hasClass("prev")||(r.find(".selected").removeClass("selected"),a.addClass("selected"),(d=g.datePicker.utils.buildYearPicker(t,i.year)).hide(),n.replaceWith(d),r.fadeOut(150,function(){d.fadeIn(150)}))}),l.on("click",".decades .prev",function(e){e.preventDefault();var a=g(this),t=a.closest(".decades"),r=t.find(".century").data("century");a.hasClass("disabled")||(r-=100,replacement=g.datePicker.utils.buildDecadePicker(r,i.decade),replacement.hide(),t.after(replacement),t.fadeOut(150,function(){t.detach(),replacement.fadeIn(150)}))}),l.on("click",".decades .next",function(e){e.preventDefault();var a=g(this),t=a.closest(".decades"),r=t.find(".century").data("century");a.hasClass("disabled")||(r+=100,replacement=g.datePicker.utils.buildDecadePicker(r,i.decade),replacement.hide(),t.after(replacement),t.fadeOut(150,function(){t.detach(),replacement.fadeIn(150)}))}),l.on("click",".decades .century",function(e){e.preventDefault()}),g(document).on("mouseup",function(e){l.is(e.target)||0!==l.has(e.target).length||(g(document).off("mouseup"),g.datePicker.hide())})},hide:function(e){e=e||!1;var a=g(".datepicker");e?a.remove():a.fadeOut(150,a.remove)}},g.fn.datePicker=function(e){if(!this.length)return this;g.extend(!0,{},g.datePicker.defaults,e);return this.each(function(){var a=g(this),e=a.parent().find("[data-toggle=datepicker]"),n=a.data("locked");n=!!n&&n.split(";");var t=function(e){var a=!0,t=e.getDate()+"/"+(e.getMonth()+1)+"/"+e.getFullYear();if(n.length)for(var r=0;r<n.length;r++)if(n[r]==t){"function"==typeof g.alert?g.alert=g.datePicker.strings.messageLocked:alert(g.datePicker.strings.messageLocked),a=!1;break}return a};e.length?e.on("click",function(e){e.preventDefault(),g(".datepicker:visible").length?g.datePicker.hide():g.datePicker.show({element:a,selectDate:t})}):a.on("click",function(){g.datePicker.show({element:a,selectDate:t})})}),this},g("[data-select=datepicker]").each(function(){g(this).datePicker()})}(jQuery);